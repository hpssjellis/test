<!DOCTYPE html>
<html>

<body>

    <img id="myImage01" src="mainsheet07.png" width="2000px"  height="600px  style="position:absolute; left:0; top:0;  ">

    <canvas id="myCanvas" width="2000px"  height="600px "style="border:1px solid black;  position:absolute; left:0; top:0;"></canvas>

<script>
    // Define your variables with "my" prefix
    let myCanvas = document.getElementById("myCanvas");
    let ctx = myCanvas.getContext("2d");
    let dotX = 20;
    let myY = 20
    let myChangeX = 30
    let myChangeNote = 40    // space between notes
    let mySelectNote = 30    // x or y of actual note
    let mySong;
    let myNormal = true
    let myRadius = 15
    let myDown = true

    async function moveDot() {
        // Clear the canvas
        ctx.clearRect(0, 0, myCanvas.width, myCanvas.height);

        /*
        // Draw the horizontal line
        ctx.beginPath();
        ctx.moveTo(0, myCanvas.height / 2);
        ctx.lineTo(myCanvas.width, myCanvas.height / 2);
        ctx.strokeStyle = "red";
        ctx.stroke();
        ctx.closePath();

        */

        for (myLoop=0; myLoop < mySong.length; myLoop++){
        //   mySelectNote = parseInt(mySong[0][0]) * 30
            let myTemp = mySong[myLoop][0].replace('-', '')
            if (mySong[myLoop][0] == '@') {myTemp = 10}
            if (mySong[myLoop][0] == '*') {myTemp = 11}
            let myLength = mySong[myLoop].length
            
           // console.log('#' + myLoop + ', mySong: ' + mySong[myLoop] + ', myTemp: ' + myTemp + ', myLenth: ' + myLength)
          //  console.log(myTemp)
          //  console.log('myLength')
           // console.log(myLength)
            
            mySelectNote = myTemp * myChangeNote
          // Draw the dot at the new position
            if (myNormal){
                ctx.beginPath();
                ctx.arc(dotX+(myChangeNote*myLoop), myY+mySelectNote, myRadius,  0, Math.PI * 2);
                ctx.fillStyle = "black";
                ctx.fill();
                ctx.closePath();
            } else {
                ctx.beginPath();
                ctx.arc(myY+mySelectNote, dotX+(myChangeNote*myLoop), myRadius,  0, Math.PI * 2);
                ctx.fillStyle = "black";
                ctx.fill();
                ctx.closePath();
                
            }
        }




            
        
   
        // Move the dot to the left using async/await
        await new Promise((resolve) => setTimeout(resolve, 100)); // Simulated delay
        if (myNormal){
          dotX -= 2;   // normal
        } else {
            if (myDown){
               dotX += 2;      //vertical go down
            } else {
               dotX -= 2;     // veritcal go up
            }
                  
        }


        // Repeat the animation
      //  if (dotX > 0) {
            requestAnimationFrame(moveDot);
      //  }
    }
</script>

<h6>Version 0.1.0-11</h6></h6>
<h2 align=center>Music Player from <a href="https://rocksetta.com/default.php">Rocksetta.com</a></h2>

<textarea id="myArea01" rows=6 cols=70 NOWRAP>
*_ '2__ *_ '4___ *_ '2___ '4__ *______---------- 7__ *__ '0__ *_ 9__ 7___ 9__ 4__ *_ *______
</textarea><br>



<input type="button" value="play Flip horizontal-rotate to vertical" onclick="{
    let dotX = 200;
    let myY = 200
    myNormal = false;
    myDown = true
    document.getElementById('myImage01').src='mainsheet07flipped.png'
    mySong = document.getElementById('myArea01').value.split(' ')
    moveDot()
}">
<input type="button" value="play Normal" onclick="{    
    let dotX = 200;
    let myY = 200
    myNormal = true;   
    myDown = true
    document.getElementById('myImage01').src='mainsheet07.png'
    mySong = document.getElementById('myArea01').value.split(' ')
    moveDot()
}">
<input type="button" value="play Normal-Vertical" onclick="{
    let dotX = 200;
    let myY = 200
    myNormal = false;
    myDown = false
    document.getElementById('myImage01').src='mainsheet07rotated.png'
    mySong = document.getElementById('myArea01').value.split(' ')
    moveDot()
}">


</body>
</html>
